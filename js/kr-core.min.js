(()=>{var oe=i=>typeof i=="object"&&i!=null&&i.nodeType===1,ne=(i,a)=>(!a||i!=="hidden")&&i!=="visible"&&i!=="clip",Z=(i,a)=>{if(i.clientHeight<i.scrollHeight||i.clientWidth<i.scrollWidth){let g=getComputedStyle(i,null);return ne(g.overflowY,a)||ne(g.overflowX,a)||(y=>{let w=(d=>{if(!d.ownerDocument||!d.ownerDocument.defaultView)return null;try{return d.ownerDocument.defaultView.frameElement}catch(v){return null}})(y);return!!w&&(w.clientHeight<y.scrollHeight||w.clientWidth<y.scrollWidth)})(i)}return!1},U=(i,a,g,y,w,d,v,h)=>d<i&&v>a||d>i&&v<a?0:d<=i&&h<=g||v>=a&&h>=g?d-i-y:v>a&&h<g||d<i&&h>g?v-a+w:0,se=i=>{let a=i.parentElement;return a==null?i.getRootNode().host||null:a},_=(i,a)=>{var g,y,w,d;if(typeof document>"u")return[];let{scrollMode:v,block:h,inline:E,boundary:B,skipOverflowHiddenElements:$}=a,X=typeof B=="function"?B:f=>f!==B;if(!oe(i))throw new TypeError("Invalid target");let W=document.scrollingElement||document.documentElement,H=[],p=i;for(;oe(p)&&X(p);){if(p=se(p),p===W){H.push(p);break}p!=null&&p===document.body&&Z(p)&&!Z(document.documentElement)||p!=null&&Z(p,$)&&H.push(p)}let A=(y=(g=window.visualViewport)==null?void 0:g.width)!=null?y:innerWidth,N=(d=(w=window.visualViewport)==null?void 0:w.height)!=null?d:innerHeight,{scrollX:I,scrollY:S}=window,{height:T,width:e,top:n,right:t,bottom:s,left:c}=i.getBoundingClientRect(),{top:m,right:C,bottom:M,left:L}=(f=>{let o=window.getComputedStyle(f);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(i),l=h==="start"||h==="nearest"?n-m:h==="end"?s+M:n+T/2-m+M,r=E==="center"?c+e/2-L+C:E==="end"?t+C:c-L,u=[];for(let f=0;f<H.length;f++){let o=H[f],{height:b,width:D,top:F,right:G,bottom:J,left:q}=o.getBoundingClientRect();if(v==="if-needed"&&n>=0&&c>=0&&s<=N&&t<=A&&n>=F&&s<=J&&c>=q&&t<=G)return u;let O=getComputedStyle(o),R=parseInt(O.borderLeftWidth,10),Y=parseInt(O.borderTopWidth,10),j=parseInt(O.borderRightWidth,10),P=parseInt(O.borderBottomWidth,10),k=0,x=0,V="offsetWidth"in o?o.offsetWidth-o.clientWidth-R-j:0,z="offsetHeight"in o?o.offsetHeight-o.clientHeight-Y-P:0,K="offsetWidth"in o?o.offsetWidth===0?0:D/o.offsetWidth:0,Q="offsetHeight"in o?o.offsetHeight===0?0:b/o.offsetHeight:0;if(W===o)k=h==="start"?l:h==="end"?l-N:h==="nearest"?U(S,S+N,N,Y,P,S+l,S+l+T,T):l-N/2,x=E==="start"?r:E==="center"?r-A/2:E==="end"?r-A:U(I,I+A,A,R,j,I+r,I+r+e,e),k=Math.max(0,k+S),x=Math.max(0,x+I);else{k=h==="start"?l-F-Y:h==="end"?l-J+P+z:h==="nearest"?U(F,J,b,Y,P+z,l,l+T,T):l-(F+b/2)+z/2,x=E==="start"?r-q-R:E==="center"?r-(q+D/2)+V/2:E==="end"?r-G+j+V:U(q,G,D,R,j+V,r,r+e,e);let{scrollLeft:ee,scrollTop:te}=o;k=Q===0?0:Math.max(0,Math.min(te+k/Q,o.scrollHeight-b/Q+z)),x=K===0?0:Math.max(0,Math.min(ee+x/K,o.scrollWidth-D/K+V)),l+=te-k,r+=ee-x}u.push({el:o,top:k,left:x})}return u};var re=i=>i===!1?{block:"end",inline:"nearest"}:(a=>a===Object(a)&&Object.keys(a).length!==0)(i)?i:{block:"start",inline:"nearest"};function ie(i,a){if(!i.isConnected||!(w=>{let d=w;for(;d&&d.parentNode;){if(d.parentNode===document)return!0;d=d.parentNode instanceof ShadowRoot?d.parentNode.host:d.parentNode}return!1})(i))return;let g=(w=>{let d=window.getComputedStyle(w);return{top:parseFloat(d.scrollMarginTop)||0,right:parseFloat(d.scrollMarginRight)||0,bottom:parseFloat(d.scrollMarginBottom)||0,left:parseFloat(d.scrollMarginLeft)||0}})(i);if((w=>typeof w=="object"&&typeof w.behavior=="function")(a))return a.behavior(_(i,a));let y=typeof a=="boolean"||a==null?void 0:a.behavior;for(let{el:w,top:d,left:v}of _(i,re(a))){let h=d-g.top+g.bottom,E=v-g.left+g.right;w.scroll({top:h,left:E,behavior:y})}}window.requestIdleCallback=window.requestIdleCallback||function(i){let a=Date.now();return setTimeout(function(){i({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-a))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(i){clearTimeout(i)};(()=>{let i=(e,n)=>{if(n){let t=n.innerText;navigator.clipboard.writeText(t);let s=e.innerHTML;e.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;\u6210\u529F~',setTimeout(()=>{e.innerHTML=s},3e3)}},a=async()=>{var n;let e=(((n=window.kr)==null?void 0:n.siteRoot)||"/")+"config.json";return await fetch(e).then(t=>t.json())},g=()=>{let e=!1,n=()=>{window.requestAnimationFrame(()=>{window.scrollY>200?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};document.getElementById("gotop-box").addEventListener("click",t=>(window.scrollTo({top:0,behavior:"smooth"}),!1)),n(),window.addEventListener("scroll",n)},y=()=>{let e=document.getElementById("kratos-menu-wrap").cloneNode(!0);e.setAttribute("id","offcanvas-menu"),e.querySelectorAll("ul").forEach(t=>{t.removeAttribute("id")});let n=document.getElementById("kratos-nav-toggle-wrapper");document.getElementById("kratos-nav-toggle").addEventListener("click",()=>{n.classList.contains("toon")?(n.classList.remove("toon"),e.classList.remove("show")):(n.classList.add("toon"),e.classList.add("show"))}),e.addEventListener("click",t=>{t.target.tagName.toLowerCase()==="a"&&t.target.getAttribute("href")&&(n.classList.remove("toon"),e.classList.remove("show"))}),window.addEventListener("resize",t=>{window.innerWidth>768&&n.classList.contains("toon")&&(n.classList.remove("toon"),e.classList.remove("show"))}),document.getElementById("kratos-page").prepend(e)},w=()=>{document.querySelectorAll(".collapse-box-control").forEach(e=>{var n;(n=e.querySelector(".collapse-box-header"))==null||n.addEventListener("click",t=>{e.classList.toggle("active")})})},d=e=>{if(e.enable){let n=document.getElementsByClassName("kratos-page-content");n.length>0&&new Viewer(n[0],{filter:t=>!(typeof t.closest=="function"&&t.closest(".kr-linklist")!==null)})}},v,h=e=>{v=e.template.replaceAll("$NEWLINE","\n").replaceAll("$AUTHOR",document.querySelector("meta[name='author']").getAttribute("content")).replaceAll("$TITLE",document.title).replaceAll("$LINK",window.location.href)},E=e=>{e.enable&&(document.body.oncopy=n=>{if(v){let t=window.getSelection().toString();t.length>e.threshold&&(n.preventDefault(),n.clipboardData&&n.clipboardData.setData("text/plain",t+v))}})},B=(e,n=!0)=>{let t,s=e/1e3,c=Math.floor(s/60/60/24),m=Math.floor(s/60/60-24*c),C=Math.floor(s/60-24*60*c-60*m),M=Math.floor(s-24*60*60*c-60*60*m-60*C),L=c.toString(),l=m.toString(),r=C.toString(),u=M.toString();return n?(L&&L.length===1&&(L="0"+L),l&&l.length===1&&(l="0"+l),r&&r.length===1&&(r="0"+r),u&&u.length===1&&(u="0"+u),t=L+"\u5929"+l+"\u5C0F\u65F6"+r+"\u5206"+u+"\u79D2"):c<540?c<60?t=L+"\u5929":t=Math.floor(c/30).toString()+"\u4E2A\u6708":t=Math.floor(c/365).toString()+"\u5E74",t},$=e=>{let n=new Date(e.since),t=document.getElementById("kr-since");setInterval(()=>{t.innerText=B(Date.now()-n)},1e3)},X=()=>{document.querySelectorAll("figure.highlight").forEach((t,s)=>{let c=t.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0],m=document.createElement("button");m.className="copy-code",m.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',m.onclick=i.bind(null,m,c),t.appendChild(m)}),document.querySelectorAll("pre:has(code)").forEach((t,s)=>{let c=t.querySelector("code"),m=document.createElement("button");m.className="copy-code",m.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',m.onclick=i.bind(null,m,c),t.appendChild(m)})},W=()=>{let e=typeof window<"u",n=e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),t=e&&"IntersectionObserver"in window,s=document.querySelector(".kr-comments.lazy-load"),c=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),typeof window.loadComments=="function"&&(window.loadCommentsEventHandler=window.requestIdleCallback(window.loadComments),window.loadComments=null)};if(e&&!n&&t&&s){let m=new IntersectionObserver(C=>{C[0].isIntersecting&&(c(),m.disconnect())},{threshold:0});m.observe(s)}else c();window.addEventListener("pjax:before",()=>{window.loadComments&&(window.loadComments=null)},{once:!0})},H=()=>{let e=document.getElementById("expire-alert");if(e){let n=e.querySelector("time"),t=new Date(parseInt(n.getAttribute("datetime"))),c=Date.now()-t,m=e.getAttribute("data-after-days");c>parseInt(m)*24*3600*1e3&&(n.innerText=B(c,!1),e.classList.remove("hidden"))}},p=(e,n)=>{let t=0;return function(){let s=this,c=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(s,c)},n||0)}},A=()=>{let e=document.getElementById("krw-toc"),n=()=>{let t=e.getElementsByClassName("toc-item"),s=[];try{Array.from(t).forEach(l=>{let r=l.querySelector(".toc-link"),u=decodeURI(r.getAttribute("href"));if(u.substring(0,1)!="#")throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u683C\u5F0F\u65E0\u9650");let f=document.getElementById(u.substring(1));if(!f)throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u672A\u627E\u5230\u76F8\u5173\u5F15\u7528");f.setAttribute("data-toc-id",s.length),s.push({at:f,el:l})})}catch(l){console.log("\u9519\u8BEF\uFF1A",l.message),Array.from(t).forEach(r=>{r.classList.add("show")});return}let c=-1,m=l=>{if(c!==l){if(c!==-1&&s[c]){s[c].el.classList.remove("active"),s[c].el.classList.remove("show");let r=s[c].el;for(;!r.classList.contains("toc");)r.classList.contains("toc-item")&&r.classList.remove("show"),r=r.parentNode}if(l!==-1&&s[l]){s[l].el.classList.add("active"),s[l].el.classList.add("show");let r=s[l].el;for(;!r.classList.contains("toc");)r.classList.contains("toc-item")&&r.classList.add("show"),r=r.parentNode;setTimeout(()=>{var f;let u=(f=s[l])==null?void 0:f.el;u&&ie(u,{behavior:"smooth",block:"nearest",inline:"nearest",boundary:e})},300)}c=l}};if("IntersectionObserver"in window){let l=p((u,f)=>{f===window.scrollY?window.requestAnimationFrame(()=>{m(u)}):l(u,window.scrollY)},100),r=new IntersectionObserver(u=>{let f=null;u.forEach(o=>{let b=Number.parseInt(o.target.getAttribute("data-toc-id"),10);!o.isIntersecting&&o.boundingClientRect.top<=o.rootBounds.top?f=b:o.isIntersecting&&o.boundingClientRect.bottom<o.rootBounds.top+o.rootBounds.height/2&&o.intersectionRatio===1&&(f=b-1)}),f!==null&&l(f,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});s.forEach(u=>{r.observe(u.at)}),window.addEventListener("pjax:before",()=>{r.disconnect(),s.length=0},{once:!0})}else{let l=()=>{s.forEach(o=>{o.h=o.at.getBoundingClientRect().top+window.scrollY-61})};l();let r=()=>{let o;!Number.isInteger(c)||c<0||c>s.length-1?o=0:o=c;let b=window.scrollY;if(b>=s[o].h)if(b>=s[s.length-1].h)o=s.length-1;else for(;b>=s[o+1].h;)o++;else for(;b<s[o].h&&(o--,!(o<0)););return o},u=p(()=>{window.requestAnimationFrame(()=>{m(r())})},100),f=p(()=>{l(),window.requestAnimationFrame(()=>{m(r())})},100);window.addEventListener("resize",f),window.addEventListener("scroll",u),window.addEventListener("pjax:before",()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",u),s.length=0},{once:!0})}let C=document.getElementsByClassName("toc-progress-bar")[0],M=document.querySelector(".kratos-page-content"),L=()=>{if(M){let l=window.scrollY||document.documentElement.scrollTop,r=M.clientHeight,u=document.documentElement.clientHeight,f=M.offsetTop,o=r>u?r-u:document.documentElement.scrollHeight-u,b=Math.max(0,Math.min((l-f)/o,1)),D=Math.round(b*100);C.style.width=(b*100).toString()+"%",C.setAttribute("aria-valuenow",D)}};window.addEventListener("scroll",()=>{window.requestAnimationFrame(L)}),L()};e&&(e.offsetParent!==null?n():"IntersectionObserver"in window&&new IntersectionObserver(n,{threshold:0,once:!0}).observe(e))},N=e=>{if(!e.enable)return;let n=window.innerHeight,t=!1,s=()=>{window.requestAnimationFrame(()=>{n<window.scrollY?t||(document.body.classList.add("nav-up"),t=!0):n>window.scrollY&&t&&(document.body.classList.remove("nav-up"),t=!1),n=window.scrollY})};window.addEventListener("wheel",s)},I=()=>{A(),X(),w(),W(),H()},S=e=>{h(e.copyrightNoticeForCopy),d(e.viewerjs)},T=()=>{document.removeEventListener("DOMContentLoaded",T,!1),window.removeEventListener("load",T,!1),a().then(e=>{E(e.copyrightNoticeForCopy),$(e.uptime),N(e.topNavScrollToggle),S(e),window.addEventListener("pjax:complete",()=>{S(e)})}),g(),y(),I(),window.addEventListener("pjax:complete",()=>{I()})};document.readyState==="complete"?setTimeout(T):(document.addEventListener("DOMContentLoaded",T,!1),window.addEventListener("load",T,!1))})();})();
